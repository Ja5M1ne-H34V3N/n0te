在图论算法中，这个问题旨在找出图中**所有**可能的顶点对 $(u, v)$ 之间的最短路径

# Floyd-Warshall 算法：子问题 (subproblems)

### **Floyd-Warshall 算法：子问题 (subproblems)**

**设定：**

- $D = (V, A; \ell)$ 是强连通图，且没有负环 (NC)；
    
- 顶点集 $V = \{1, 2, \dots, n\}$。
    

**寻找全源最短路径 (Find all-pairs shortest paths)：**

- **朴素方法 (Naïve)：** 调用 $n$ 次 Bellman-Ford (BF) 算法，时间复杂度为 $O(n^2m)$。
    
- **FW 算法：** 时间复杂度为 $O(n^3)$。
    

子集动态规划 (Subset DP)：

通过限制可用的中间节点 (intermediate nodes) 候选池来定义子问题。

**定义：**$d_k(i, j) :=$ 仅允许使用 $\{1, \dots, k\}$ 范围内的节点作为**中间节点**时，$i$ 到 $j$ 的最短路径长度。



## 具体实现
### 1. 核心思想：子问题划分

FW 算法的巧妙之处在于它如何定义“子问题”。它不是按路径长度（边数）来递归，而是按**允许使用的中间节点范围**来递归：

- **定义状态**：$d_k(i, j)$ 表示从节点 $i$ 到节点 $j$ 的最短路径长度，且该路径只能选择 $\{1, 2, \dots, k\}$ 这些节点作为**中间跳板**。
    
- **初始状态 ($k=0$)**：不允许经过任何中间节点。此时 $i$ 到 $j$ 的距离就是它们之间直连边的权重；如果没有直连边，则为无穷大 ($\infty$)。
### 2. 递归转移方程

当你考虑是否将第 $k$ 个节点加入“允许的中间节点”集合时，从 $i$ 到 $j$ 的最短路径只有两种可能：
$$d_k(i, j) = \min \{ d_{k-1}(i, j), d_{k-1}(i, k) + d_{k-1}(k, j) \}$$
1. **不经过节点 $k$**：最短路径依然是之前只允许经过前 $k-1$ 个节点时的路径。
2. **经过节点 $k$**：路径被节点 $k$ 分成两段：$i \to k$ 和 $k \to j$。这两段路径都只允许使用前 $k-1$ 个节点作为中间点。
算法取这两者的**最小值**。
### 3. 算法流程与复杂度
1. **初始化**：创建一个 $n \times n$ 的矩阵，填入边权。
2. **三层循环**：
    - 最外层循环 $k$：依次尝试将每个节点作为中间点（$1 \dots n$）。
    - 中间两层循环 $i, j$：遍历矩阵中的每一个顶点对。
3. **更新**：根据转移方程更新矩阵。
- **时间复杂度**：$O(n^3)$，因为有三层嵌套循环。
- **空间复杂度**：标准实现为 $O(n^3)$（存储所有 $k$ 层的矩阵），但可以优化到 $O(n^2)$（只保留当前和上一层的状态）。
# 关键边问题
### **第一张图：关键边 (vital edge)**
这张图定义了什么是“关键边”以及如何检测它。
- **定义：** 图 $G$ 的一条**关键边**是指从 $G$ 中移除该边后，会导致从 $s$ 到 $t$ 的**最短距离增加**的边。
- **计算步骤：**
    1. 首先计算**紧凑边 (tight edges)**。
    2. 然后计算所有可以到达 $t$ 的节点。
    3. 在这些节点中仅保留 **0-边 (0-edges)**。
    4. 通过两次增广操作判断**最大流 (max-flow)** 是否为 1，耗时 $O(m)$。
- **结论：**
    - 如果最大流 $> 1$，则不存在关键边（弧）。
    - 否则，每个**最小割 (min-cut)** 恰好包含一条边。找出所有的最小割。
### **第二张图：最关键边 (most vital edge)**

这张图引入了“最”关键的概念，并提出了一个算法挑战。
- **定义：** **最关键边**是指一条其移除会导致 $s-t$ 最短距离**增幅最大**的关键边。
- **问题：** 描述一种确定图 $G$ 中最关键边的算法。该算法的运行时间是多少？
### **第三张图：最关键边（判断题与证明）**
这张图列出了关于关键边的几个命题，要求证明或给出反例。
**假设网络是有向的，弧长度为正，且存在某些关键弧。请证明下列陈述为真，或通过反例说明其为假：**
- **(a)** 最关键弧是具有最大 $C_{ij}$ 值（容量或某种权重）的弧。
- **(b)** 最关键弧是某条从节点 $s$ 到节点 $t$ 的最短路径上具有最大 $c_{ij}$ 值的弧。
- **(c)** 不属于任何从节点 $s$ 到节点 $t$ 的最短路径的弧，不可能是最关键弧。
- **(d)** 一个网络可能包含多个最关键弧。
总结提示：
这部分内容将图论中的“最短路径”与“网络流（最大流/最小割）”结合在了一起。简单来说，如果你想破坏两个点之间的交通，**关键边**就是那些一旦封锁就会让你必须绕远路的边。